
/* ======================
   THEME VARIABLES
====================== */
:root{
  --bg:#0b0f14;
  --panel:#0f1520;
  --panel2:#0c1119;
  --line:#1f2b3a;
  --text:#e6f0ff;
  --muted:#9fb0c6;

  --ok:#25e07b;
  --warn:#ffd86b;
  --bad:#ff6c79;

  /* phase colors (fixed) */
  --ph-auth:#7ccaff;
  --ph-assoc:#68efc3;
  --ph-eap:#ffc76a;
  --ph-4way:#caa6ff;

  --chip:#0e1620;
  --chipBorder:#273548;

  --shadow: 0 10px 28px rgba(0,0,0,.45);
  --radius: 12px;
}

/* ======================
   BASE LAYOUT & TYPO
====================== */
html,body{
  height:100%;
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:14px/1.4 "Segoe UI",system-ui,-apple-system,Roboto,Arial,sans-serif;
}
.container{max-width:1200px;margin:26px auto;padding:0 20px;}
#app{display:flex;flex-direction:column;gap:16px;}
#headerBar{display:flex;gap:10px;align-items:center;justify-content:space-between;}
#reportView{display:flex;flex-direction:column;gap:16px;}
#controlPanel{display:none;}

/* ======================
   BUTTONS
====================== */
.btn{
  background:linear-gradient(180deg,#182230,#101822);
  border:1px solid #273548;border-bottom-color:#1b2735;
  color:#dce7f7;border-radius:8px;padding:8px 12px;cursor:pointer;
  transition:transform .12s, box-shadow .12s;
}
.btn:hover{transform:translateY(-1px);box-shadow:0 8px 18px rgba(0,0,0,.35)}
.btn:active{transform:translateY(0)}
button:disabled,
.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
  filter: none;
  transition: none;
  background: var(--panel2);
  color: var(--muted);
  border-color: var(--line);
}
button, .btn {
  cursor: pointer;
}

button, select, .btn {
  color: var(--text);
}

button, .btn {
  color: var(--text);
  background-color: var(--panel);
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 6px 14px;
  transition: border-color 0.2s, background-color 0.2s;
}

button:hover, .btn:hover,
button:focus, .btn:focus {
  border-color: var(--ok);
  background-color: var(--panel2);
  outline: none;
}

#btnExpandAll, #btnCollapseAll {
  font-size: 0.85em;
  padding: 5px 10px;
  margin-left: 4px;
}
/* Adds space below the expand/collapse buttons row */
#roamsButtons {
  margin-bottom: 10px;   /* tweak 8â€“14px to taste */
}

/* AI Integration Styles */
.btnAnalyze {
  background: linear-gradient(180deg,#1c3874,#142a5c);
  border: 1px solid #2d4b8c;
  border-bottom-color: #1e325e;
  color: #e6f0ff;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.btnAnalyze:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 36px rgba(28,70,200,0.24);
}

/* AI Modal Styles */
.ai-modal .ai-content {
  background: var(--panel2);
  padding: 16px;
  border-radius: 8px;
  margin: 12px 0;
  max-height: 70vh;
  overflow-y: auto;
}

.ai-test-result {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 0.9em;
}

.ai-test-result.success {
  background: var(--ok);
  color: var(--bg);
}

.ai-test-result.error {
  background: var(--bad);
  color: var(--text);
}

/* Modal base styles */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
}

.modal-content {
  background: var(--panel);
  padding: 24px;
  border-radius: var(--radius);
  min-width: 400px;
  max-width: 800px;
  box-shadow: var(--shadow);
  max-height: 90vh;
  overflow-y: auto;
}

.modal-actions {
  margin-top: 20px;
  display: flex;
  justify-content: flex-end;
  gap: 12px;
}

/* Form elements in modals */
.modal .modal-content input[type="text"],
.modal .modal-content input[type="password"],
.modal .modal-content input[type="number"],
.modal .modal-content select {
  background: var(--panel2);
  border: 1px solid var(--line);
  color: var(--text);
  padding: 8px 12px;
  border-radius: 6px;
  width: 100%;
  margin: 4px 0 12px;
}

.modal .modal-content input:focus,
.modal .modal-content select:focus {
  border-color: var(--ok);
  outline: none;
}

.modal .modal-content label {
  color: var(--muted);
  font-size: 0.9em;
}

/* ======================
   TOP BAR 
====================== */
#topbar {
  position: sticky;
  top: 0;
  z-index: 100;
  width: 100%;
  background: var(--panel);
  border-bottom: 1px solid var(--line);
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
}


#topbar .topbar-inner {
  max-width: 1200px;      
  margin: 0 auto;
  padding: 8px 20px;     
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* Left side brand */
#topbar .brand {
  display: flex;
  align-items: center;
  gap: 8px;
}

#topbar .logo {
  width: 30px;
  height: 30px;
  opacity: 0.9;
}

#topbar .title {
  font-size: 1.4rem;
  font-weight: 600;
  color: var(--text);
  letter-spacing: 0.5px;
}

/* Right side logout button */
.btnLogout {
  background: transparent;
  border: 1px solid var(--line);
  color: var(--text);
  font-size: 0.85rem;
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btnLogout:hover {
  background: var(--panel2);
  border-color: var(--warn);
  color: var(--warn);
}

#topbar .topbar-inner {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#topbar .actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.btnDocs {
  background: transparent;
  border: 1px solid var(--line);
  color: var(--text);
  font-size: 0.85rem;
  padding: 0.4em 0.8em;
  border-radius: 0.4em;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btnDocs:hover {
  background: rgba(255,255,255,0.05);
  border-color: var(--ok);
  color: var(--ok);
}

/* Analyze with AI button (accent) */
.btnAnalyze {
  background: linear-gradient(180deg,#2a6bff,#1f4ee6);
  border: 1px solid rgba(20,60,160,0.6);
  color: white;
  font-weight: 700;
  padding: 8px 14px;
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(28,70,200,0.18);
}
.btnAnalyze:hover { transform: translateY(-2px); box-shadow: 0 14px 36px rgba(28,70,200,0.24); }

/* AI Modal */
.ai-modal {
  width: 1100px;
  max-width: calc(100vw - 48px);
  max-height: 86vh;
  background: linear-gradient(180deg,#08121a,#0b1620);
  border-radius: 12px;
  padding: 18px;
  box-shadow: 0 30px 60px rgba(0,0,0,0.6);
  overflow:auto;
  color: var(--text);
  border: 1px solid rgba(50,80,120,0.25);
}
.ai-modal h4 { margin: 0 0 8px 0; color: #cfe0ff }
.ai-modal .section { margin-bottom: 14px; }
.ai-modal .finding { border-left: 3px solid rgba(255,255,255,0.04); padding: 10px 12px; margin-bottom: 10px; background: rgba(255,255,255,0.015); border-radius:8px }
.ai-modal .evidence { font-family: monospace; background: #071018; padding:8px; border-radius:6px; border:1px solid var(--line); color:#d9eaff; max-height:140px; overflow:auto }
.ai-modal .remediation { background: linear-gradient(90deg,#07131a,#081821); padding:10px;border-radius:8px;border:1px solid rgba(30,50,80,0.2); }
/* Make inputs/selects inside modal follow theme (dark bg, white text) */
.modal .modal-content input[type="text"],
.modal .modal-content input[type="password"],
.modal .modal-content input[type="number"],
.modal .modal-content select,
.modal .modal-content textarea {
  background: var(--panel2);
  color: var(--text);
  border: 1px solid var(--line);
  padding: 8px 10px;
  border-radius: 8px;
  outline: none;
}
.modal .modal-content select { appearance: none; -moz-appearance: none; -webkit-appearance: none; }
.modal .modal-content input::placeholder, .modal .modal-content textarea::placeholder { color: var(--muted); }
.modal .modal-content label { color: var(--text); font-weight:600; }

/* AI test result classes */
.ai-test-result.ok { color: var(--ok); font-weight:700; }
.ai-test-result.fail { color: var(--bad); font-weight:700; }

/* Test details pre box */
#aiTestDetails {
  font-family: monospace;
  color: var(--text);
  background: var(--panel2);
  border: 1px solid var(--line);
  padding: 8px;
  border-radius: 6px;
  margin-top: 6px;
}
/* Keep long error lines from expanding the viewport */
#aiTestDetails {
  box-sizing: border-box;
  width: 100%;
  max-width: 100%;
  white-space: pre-wrap;     /* wrap long lines */
  word-break: break-word;   /* break long tokens */
  overflow: auto;           /* scroll when content overflows */
}

/* Also ensure any pre inside the AI modal is constrained */
.ai-modal pre, .ai-modal .evidence {
  box-sizing: border-box;
  max-width: 100%;
  white-space: pre-wrap;
  word-break: break-word;
  overflow: auto;
}

/* Rendered markdown inside AI modal */
.ai-modal .ai-markdown h1, .ai-modal .ai-markdown h2, .ai-modal .ai-markdown h3,
.ai-modal .ai-markdown h4, .ai-modal .ai-markdown h5, .ai-modal .ai-markdown h6 {
  color: #cfe0ff; margin: 8px 0 6px 0;
}
.ai-modal .ai-markdown p { margin: 6px 0; color: var(--text); }
.ai-modal .ai-markdown ul, .ai-modal .ai-markdown ol { margin: 6px 0 6px 18px; }
.ai-modal .ai-markdown code { background: rgba(255,255,255,0.03); padding: 2px 6px; border-radius: 4px; }
.ai-modal .ai-markdown pre { background: #071018; padding: 10px; border-radius: 6px; border: 1px solid var(--line); color: #d9eaff; overflow:auto; }
.ai-modal .ai-markdown a { color: #9cc8ff; }

/* Make overlay content center and ensure ai-modal looks good on small screens */
#overlay { align-items: center; justify-content: center; padding: 24px; }
.ai-modal { box-shadow: 0 40px 80px rgba(0,0,0,0.7); }
/* AI settings test result */
.ai-test-result{margin-left:8px;color:var(--muted);font-weight:600}

/* =====================
  AI Structured Cards
  ===================== */
.ai-structured { display:flex;flex-direction:column;gap:12px;margin-top:8px }
.ai-findings-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); gap:12px }
.ai-card { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04); padding:12px; border-radius:10px }
.ai-card h3 { margin:0 0 6px 0; font-size:15px; color:#e6f6ff }
.ai-severity { font-weight:700; font-size:12px; margin-bottom:8px }
.ai-severity.low { color: var(--ok); }
.ai-severity.medium { color: var(--warn); }
.ai-severity.high { color: var(--bad); }
.ai-card .evidence { margin-top:8px; font-family:monospace; font-size:13px; background: #061018; padding:8px; border-radius:8px; border:1px solid var(--line) }
.ai-card .ai-hypothesis { margin-top:8px; color:var(--muted) }
.ai-card .ai-remediation { margin-top:8px; background: linear-gradient(90deg,#07131a,#081821); padding:10px;border-radius:8px;border:1px solid rgba(30,50,80,0.2); }

/* ======================
   PANELS & SECTION HEADERS
====================== */
.panel{
  background:linear-gradient(180deg,var(--panel),var(--panel2));
  border:1px solid var(--line); border-radius:var(--radius);
  box-shadow:var(--shadow); padding:14px 16px;
}
.panel h3{
  margin:0 0 12px 0; font-size:12px; letter-spacing:.14em; text-transform:uppercase;
  color:#cfe0ff; opacity:.92;
}

/* ======================
   PRIMARY GRID (Chart + Metrics)
====================== */
.grid{
  display:grid; grid-template-columns: 2fr 1fr; gap:16px;
  align-items:stretch;
}
.chartPanel, .metricsPanel{height:100%;}
.metricsPanel{display:flex;flex-direction:column;}

/* ======================
   METRICS GRID
====================== */
.metrics{
  display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:2px;
}
.metric{
  padding:12px;border:1px solid var(--line);border-radius:10px;
  background:linear-gradient(180deg,#0a1118,#0b1117);
}
.metric .label{color:var(--muted);font-size:12px}
.metric .value{margin-top:6px;font-size:20px;font-weight:700;letter-spacing:.02em}

/* ======================
   LEGEND CHIPS
====================== */
.legend{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.chip{
  display:inline-flex;align-items:center;gap:8px;border-radius:14px;padding:6px 10px;
  border:1px solid var(--chipBorder);background:var(--chip);cursor:pointer;user-select:none;
  transition:.15s; box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
}
.chip:hover{box-shadow:0 0 12px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06)}
.dot{width:10px;height:10px;border-radius:2px;box-shadow:none}
.dim{opacity:.45}

/* ======================
   CHART AREA (SVG)
====================== */
.chartWrap{position:relative;padding:10px;border:1px solid var(--line);border-radius:10px;background:linear-gradient(180deg,#0a1117,#0a0f14)}
#chart{width:100%;height:360px;display:block}
.axis text{fill:#e8f1ff}
.axis line,.axis path{stroke:#243145}
.rowChip{font-size:11px;letter-spacing:.06em;dominant-baseline:middle}
.chipTextLight{fill:#10161e}

/* ======================
   TOOLTIP
====================== */
.tip{
  position:fixed;z-index:9999;pointer-events:none;transform:translate(16px,-16px);
  min-width:220px;max-width:360px;background:#0b131a;border:1px solid #2d3a49;border-radius:8px;
  padding:10px 12px;box-shadow:0 10px 30px rgba(0,0,0,.6)
}
.tip h4{margin:0 0 6px 0;font-size:12px;letter-spacing:.12em;color:#cfe1ff;text-transform:uppercase}
.tip p{margin:2px 0;color:#d7e6ff}
.tip small{color:#8ea2b6}

/* ======================
   TABLES
====================== */
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #1e2a38}
th{color:#a2bad6;font-weight:600;text-transform:uppercase;letter-spacing:.12em;font-size:11px;text-align:left}
.rssi{font-weight:700}
.rssi.green{color:#25e07b}
.rssi.yellow{color:#ffd86b}
.rssi.red{color:#ff6c79}
.pill{
  display:inline-flex;gap:6px;align-items:center;border:1px solid var(--chipBorder);border-radius:999px;padding:4px 8px;background:#0b1219;font-size:13px
}
.pill .dot{width:8px;height:8px;border-radius:999px;box-shadow:none}


/* Keep MFP pills on one line */
#apTable th:nth-child(7),
#apTable td:nth-child(7) {
  min-width: 120px;
  white-space: nowrap;
}

td .pill {
  white-space: nowrap;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

th.sorted {
  color: var(--ok);
}
th:hover {
  color: var(--warn);
}

/* ======================
   ACCORDION
====================== */
.accordion{border:1px solid #213042;border-radius:10px;background:linear-gradient(180deg,#0b1117,#090e13);overflow:hidden;margin-bottom:8px;}
.accHead{display:flex;align-items:center;gap:12px;padding:12px 14px;cursor:pointer;border-bottom:1px solid #172230}
.accHead:hover{background:#0b1219}
.accHead .status{margin-left:auto;font-weight:700}
.accBody{display:none;padding:10px 14px 16px 14px;border-top:1px dashed #1b2838}
.accBody.open{display:block}
.phaseCard{border:1px solid #1c2a3a;border-radius:10px;padding:12px;margin-top:10px;background:#0a1117}
.ok{color:var(--ok)} .bad{color:var(--bad)} .muted{color:var(--muted)}
.kbd{background:#0e1620;border:1px solid #263447;border-radius:6px;padding:2px 6px}

.accHead .statusGroup{
  margin-left:auto;
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:8px;
  min-width:100px;
}
.accHead .statusGroup .status{
  margin-left:0;
  min-width:60px;
  text-align:right;
}

.kbd {
  font-family: monospace;
  background: rgba(255,255,255,.05);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.9em;
}

/* --- Log pill styling --- */
.logDetails {
  margin-top: 8px;
}

.logPill {
  cursor: pointer;
  background: rgba(255,255,255,0.05);
  border: 1px solid var(--line);
  padding: 4px 10px;
  border-radius: 999px;
  color: var(--text);
  font-size: 12px;
  font-weight: 500;
  transition: all 0.15s ease;
}

.logPill:hover {
  background: var(--panel2);
  border-color: var(--ok);
  color: var(--ok);
}

.logContent {
  white-space: pre-wrap;
  max-height: 240px;
  overflow: auto;
  margin: 6px 0 0 0;
  color: #d9eaff;
  font-family: monospace;
  font-size: 13px;
  background: #0b1117;
  border: 1px solid var(--line);
  border-radius: 6px;
  padding: 8px;
}

/* ======================
   HEADER PILLS
====================== */
.headerPills{display:flex;flex-wrap:wrap;gap:10px}

/* ======================
   SPACING
====================== */
#reportView > .grid { margin-bottom: 30px; }
#reportView > .panel { margin-top: 0; }

/* ======================
   TOGGLE SWITCH
====================== */
.toggle{position:relative;display:inline-block;width:40px;height:20px;}
.toggle input{opacity:0;width:0;height:0;}
.slider{
  position:absolute;cursor:pointer;inset:0;
  background-color:var(--line);border-radius:20px;transition:.3s;
}
.slider:before{
  position:absolute;content:"";height:14px;width:14px;left:3px;bottom:3px;
  background-color:var(--muted);transition:.3s;border-radius:50%;
}
.toggle input:checked + .slider{background-color:var(--ok);}
.toggle input:checked + .slider:before{transform:translateX(20px);background-color:var(--bg);}

/* ======================
   FORMS
====================== */
input[type=number]::-webkit-outer-spin-button,
input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}
input[type=number]{-moz-appearance:textfield;appearance:textfield;}

/* ======================
   DOWNLOAD BUTTON
====================== */
.btnDownloadRoam{
  background:transparent;
  border:1px solid var(--line);
  color:var(--text);
  font-size:0.85em;
  padding:3px 8px;
  border-radius:6px;
  margin-left:8px;
  cursor:pointer;
  transition:all 0.2s ease;
}
.btnDownloadRoam:hover{
  background:var(--panel2);
  border-color:var(--ok);
  color:var(--ok);
}

/* ======================
   ANIMATIONS
====================== */
@keyframes spin { from {transform:rotate(0)} to {transform:rotate(360deg)} }

/* ======================
   MODAL
====================== */
.modal {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-content {
  background: var(--panel2);
  padding: 24px;
  border-radius: 12px;
  width: 340px;
  color: var(--text);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  display: flex;
  flex-direction: column;
  align-items: center;
  /* transform: translateY(-142%); */
}


.modal-content textarea {
  width: 100%;
  height: 80px;
  background: var(--panel);
  color: var(--text);
  border: 1px solid var(--line);
  border-radius: 8px;
  padding: 8px;
}

.modal-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 10px;
}

.modal-actions button {
  margin-left: 8px;
}


/* ======================
   Remove dropdown focus
====================== */
#loadDropdown:focus {
  outline: none;
  box-shadow: none;
}

/* ======================
   SCROLLABLE CHART
====================== */
.chartWrap{
  max-height: 400px;   /* pick a height that fits your layout */
  overflow-y: auto;    /* vertical scroll when SVG exceeds 400px */
  overflow-x: hidden;
}
/* ===== Scrollbar (dark theme) ===== */
.chartWrap::-webkit-scrollbar {
  width: 10px;
}
.chartWrap::-webkit-scrollbar-thumb {
  background-color: #1e2a34;        /* dark slate thumb */
  border-radius: 6px;
  border: 2px solid #0f1520;        /* gap blend with background */
}
.chartWrap::-webkit-scrollbar-thumb:hover {
  background-color: #2c3b4c;
}
.chartWrap::-webkit-scrollbar-track {
  background-color: #0b0f14;
}
